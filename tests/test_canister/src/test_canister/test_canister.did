import "./ws_types.did";

type CanisterWsSendResult = variant {
  Ok : null;
  Err : text;
};

service : (opt text) -> {
  "ws_register" : (CanisterWsRegisterArguments) -> (CanisterWsRegisterResult);
  "ws_open" : (CanisterWsOpenArguments) -> (CanisterWsOpenResult);
  "ws_close" : (CanisterWsCloseArguments) -> (CanisterWsCloseResult);
  "ws_message" : (CanisterWsMessageArguments) -> (CanisterWsMessageResult);
  "ws_get_messages" : (CanisterWsGetMessagesArguments) -> (CanisterWsGetMessagesResult) query;

  "ws_wipe" : () -> ();
  "ws_send" : (ClientPublicKey, record { text : text; timestamp : nat }) -> (CanisterWsSendResult);
};
